import{r as l,j as a}from"./index-Cfa3plor.js";import{C as N,a as w}from"./CRow-trv6YjC8.js";import{C as M}from"./CCard-DCv4scMT.js";import{C as v}from"./CCardHeader-CHCEmHVX.js";import{C as D}from"./CCardBody-BAze2YgW.js";import{C as S,a as E,b as p,c as H,d as R,e as B}from"./CTable-C01P573-.js";import{C as O,a as c}from"./CPaginationItem-pHzTefei.js";import"./index.esm-BLmeHUlG.js";const i=10,C="https://api.flyer.tel",F=()=>{const[x,u]=l.useState([]),[r,n]=l.useState(1),[f]=l.useState(5),[o,j]=l.useState(0);l.useEffect(()=>{g(r)},[r]);const g=async e=>{try{const t=await(await fetch(`${C}/api/simcard/channel2/products?page=${e}`)).json();console.log("apiHost="+C),console.log("result.total="+t.total),u(t.data),j(Math.ceil(t.total/i))}catch(s){console.error("Error fetching data:",s)}},P=()=>{r<o&&n(e=>e+1)},b=()=>{r>1&&n(e=>e-1)};l.useEffect(()=>{},[r,f]);const d=["productName","productType","activeType","settlementPrice"],h=["productCode","periodType","ruleDesc","days","apnDesc","isContract","validityPeriod","dataUnit","mcc","operatorDesc","dataTotal","minOrderCycle","lastModifiedTime","dataLimited"],m=e=>{switch(e){case"productName":return{width:"15%"};default:return{width:"8%"}}},y=()=>{const e=Math.floor(i/2);let s=Math.max(1,r-e),t=Math.min(o,r+e);return t-s+1<i&&(s===1?t=Math.min(o,s+i-1):t===o&&(s=Math.max(1,t-i+1))),Array.from({length:t-s+1},($,T)=>s+T)};return a.jsx(N,{children:a.jsx(w,{xs:12,children:a.jsxs(M,{className:"mb-4",children:[a.jsx(v,{children:a.jsx("strong",{children:"渠道2產品列表"})}),a.jsxs(D,{children:[a.jsxs(S,{className:"table-hover fs-6",children:[a.jsx(E,{color:"light",children:a.jsx(p,{children:d.filter(e=>!h.includes(e)).map(e=>a.jsx(H,{scope:"col",className:"text-nowrap",style:m(e),children:e},e))})}),a.jsx(R,{children:x.map((e,s)=>a.jsx(p,{children:d.filter(([t])=>!h.includes(t)).map(t=>a.jsx(B,{style:m(t),children:e[t]},t))},s))})]}),a.jsxs(O,{"aria-label":"Page navigation example",children:[a.jsx(c,{"aria-label":"Previous",onClick:b,children:a.jsx("span",{"aria-hidden":"true",children:"«"})}),y().map(e=>a.jsx(c,{onClick:()=>n(e),className:e===r?"active":"",children:e},e)),a.jsx(c,{"aria-label":"Next",onClick:P,children:a.jsx("span",{"aria-hidden":"true",children:"»"})})]}),a.jsxs("span",{children:[" ","第 ",r," 頁 / ",o," 頁"," "]})]})]})})})};export{F as default};
