import{r as h,_ as R,R as z,b as L,c as Z,P as F,j as e}from"./index-BZyITvHh.js";import{a as x,c as q}from"./index.esm-CuN79Dac.js";import{C as B}from"./ChannelProducts-BjYCIS1e.js";import{C as Q}from"./CForm-kgbiG5M_.js";import{a as s,C as _}from"./CRow-DdhJNRTX.js";import{C as o,a as C}from"./CFormLabel-qc1EBf5A.js";import{C as p}from"./CFormInput-CcFHigvy.js";import{C as I}from"./CFormCheck-Bm3vEe0m.js";import{C as A,a as G,b as V,c as d,d as J,e as m}from"./CTable-BjcPKGTJ.js";import{C as O,a as K,b as U,c as W}from"./CModalTitle-BRGf0Wtv.js";import"./Api-BxWCt5AG.js";import"./DefaultLayout-BkVA415H.js";import"./cil-user-Ddrdy7PS.js";var v=h.forwardRef(function(r,j){var i=r.children,c=r.className,y=R(r,["children","className"]);return z.createElement("div",L({className:Z("modal-footer",c)},y,{ref:j}),i)});v.propTypes={children:F.node,className:F.string};v.displayName="CModalFooter";var X=["512 512","<path fill='var(--ci-primary-color, currentColor)' d='M96,472a23.82,23.82,0,0,0,23.579,24H392.421A23.82,23.82,0,0,0,416,472V152H96Zm32-288H384V464H128Z' class='ci-primary'/><rect width='32' height='200' x='168' y='216' fill='var(--ci-primary-color, currentColor)' class='ci-primary'/><rect width='32' height='200' x='240' y='216' fill='var(--ci-primary-color, currentColor)' class='ci-primary'/><rect width='32' height='200' x='312' y='216' fill='var(--ci-primary-color, currentColor)' class='ci-primary'/><path fill='var(--ci-primary-color, currentColor)' d='M328,88V40c0-13.458-9.488-24-21.6-24H205.6C193.488,16,184,26.542,184,40V88H64v32H448V88ZM216,48h80V88H216Z' class='ci-primary'/>"];const me=()=>{const[r,j]=h.useState(""),[i,c]=h.useState([]),[y,H]=h.useState(!1),[g,u]=h.useState(!1),[f,k]=h.useState("joytel"),M=l=>{console.log("handleGetSelectedItems value="+JSON.stringify(l)),j(l)},N=l=>{k(l.target.value),c([]),console.log("handleSelectChannel value="+l.target.value)},P=()=>{c(r),u(!1),console.log("handelSendItems value="+r)},E=(l,a)=>{console.log("handelDelCartItem itemCode="+a);let t=i;t=t.reduce((n,T)=>(T.itemCode!==a&&n.push(T),n),[]),c(t)},w=(l,a)=>{a<1||c(t=>t.map(n=>n.itemCode===l?{...n,itemQuantity:a}:n))},b=l=>l.itemPrice*l.itemQuantity,S=()=>i.reduce((l,a)=>l+b(a),0),D=l=>{l.currentTarget.checkValidity()===!1&&(l.preventDefault(),l.stopPropagation()),H(!0)};return e.jsxs(Q,{className:"row g-3 needs-validation",noValidate:!0,validated:y,onSubmit:D,children:[e.jsxs(s,{md:4,className:"position-relative",children:[e.jsx(o,{htmlFor:"username",children:"客戶姓名"}),e.jsx(p,{type:"text",id:"username",defaultValue:"",required:!0}),e.jsx(C,{invalid:!0,children:"請輸入客戶姓名"})]}),e.jsxs(s,{md:4,className:"position-relative",children:[e.jsx(o,{htmlFor:"email",children:"Email"}),e.jsx(p,{type:"text",id:"email",defaultValue:"",required:!0}),e.jsx(C,{invalid:!0,children:"請輸入Email"})]}),e.jsxs(s,{md:4,className:"position-relative",children:[e.jsx(o,{htmlFor:"cellphone",children:"聯絡電話"}),e.jsx(p,{type:"text",id:"cellphone",defaultValue:"",required:!0}),e.jsx(C,{invalid:!0,children:"請輸入聯絡電話"})]}),e.jsxs(s,{md:12,className:"position-relative",children:[e.jsx(o,{htmlFor:"note",children:"備註"}),e.jsx(p,{type:"text",id:"note",defaultValue:""}),e.jsx(C,{invalid:!0,children:"請輸入備註"})]}),e.jsxs(s,{md:12,className:"position-relative",children:[e.jsx(o,{htmlFor:"channelType",children:"渠道類型    "}),e.jsx(I,{inline:!0,type:"radio",value:"joytel",name:"channelType",id:"fchannelType1",label:"渠道1",checked:f==="joytel",onChange:N}),e.jsx(I,{inline:!0,type:"radio",value:"tgt",name:"channelType",id:"fchannelType2",label:"渠道2",checked:f==="tgt",onChange:N})]}),e.jsx(s,{md:12,children:e.jsxs(o,{htmlFor:"validationDefault05",children:["商品列表    ",e.jsx(x,{color:"info",size:"sm",onClick:()=>u(!g),children:"新增商品"})]})}),e.jsx(s,{md:12,children:e.jsxs(A,{children:[e.jsx(G,{color:"secondary",children:e.jsxs(V,{children:[e.jsx(d,{scope:"col",className:"text-nowrap",children:"商品名稱"}),e.jsx(d,{scope:"col",className:"text-nowrap",children:"單價"}),e.jsx(d,{scope:"col",className:"text-nowrap",children:"激活日期"}),e.jsx(d,{scope:"col",className:"text-nowrap",children:"數量"}),e.jsx(d,{scope:"col",className:"text-nowrap",children:"總價"}),e.jsx(d,{scope:"col",className:"text-nowrap",children:"操作"})]})}),e.jsx(J,{children:i.map((l,a)=>e.jsxs(V,{id:l.itemCode,children:[e.jsx(m,{children:l.itemName}),e.jsx(m,{children:l.itemPrice}),e.jsx(m,{children:l.itemDate}),e.jsx(m,{children:e.jsx(p,{type:"number",size:"sm",max:10,min:1,value:l.itemQuantity,onChange:t=>w(l.itemCode,parseInt(t.target.value,10))})}),e.jsx(m,{children:b(l).toFixed(2)}),e.jsx(m,{children:e.jsx(x,{color:"danger",size:"sm",onClick:t=>E(t,l.itemCode),children:e.jsx(q,{icon:X,size:"sm"})})})]},a))})]})}),e.jsxs(_,{className:"my-2 text-end",children:[e.jsxs(s,{children:["商品總價：",S().toFixed(2),"元"]}),e.jsxs(s,{children:["應結算金額：",S().toFixed(2),"元"]})]}),e.jsx(s,{xs:12,className:"mb-5",children:e.jsx(x,{color:"primary",type:"submit",className:"float-end",children:"送出"})}),e.jsxs(O,{size:"xl",alignment:"center",visible:g,onClose:()=>u(!1),"aria-labelledby":"ScrollingLongContentExampleLabel",children:[e.jsx(K,{children:e.jsx(U,{id:"ScrollingLongContentExampleLabel",children:"商品列表"})}),e.jsx(W,{children:e.jsx(B,{channelName:f,isSelect:!0,onSelectedItem:M,cartItems:i})}),e.jsxs(v,{children:[e.jsx(x,{color:"secondary",onClick:()=>u(!1),children:"取消"}),e.jsx(x,{color:"primary",onClick:P,children:"確認"})]})]})]})};export{me as default};
