import{r as l,j as a}from"./index-BOQzm67v.js";import{b as T}from"./Api-DLDctVmQ.js";import{C as N,a as D}from"./CRow-CMSj6RAh.js";import{C as M}from"./CCard-ozNWD-bD.js";import{C as v}from"./CCardHeader-C__CULu-.js";import{C as w}from"./CCardBody-Cgmrimio.js";import{C as S,a as E,b as C,c as H,d as R,e as B}from"./CTable-D6c4Qb8_.js";import{C as O,a as c}from"./CPaginationItem--Du6kzqj.js";import"./index.esm-BOrPf7p9.js";const n=10,J=()=>{const[x,u]=l.useState([]),[r,o]=l.useState(1),[p]=l.useState(5),[i,f]=l.useState(0);l.useEffect(()=>{j(r)},[r]);const j=async e=>{try{const t=await T({page:e});u(t.result.data),f(Math.ceil(t.result.total/n))}catch(s){console.error("Error fetching data:",s)}},P=()=>{r<i&&o(e=>e+1)},g=()=>{r>1&&o(e=>e-1)};l.useEffect(()=>{},[r,p]);const d=["productName","productType","activeType","settlementPrice"],m=["productCode","periodType","ruleDesc","days","apnDesc","isContract","validityPeriod","dataUnit","mcc","operatorDesc","dataTotal","minOrderCycle","lastModifiedTime","dataLimited"],h=e=>{switch(e){case"productName":return{width:"15%"};default:return{width:"8%"}}},b=()=>{const e=Math.floor(n/2);let s=Math.max(1,r-e),t=Math.min(i,r+e);return t-s+1<n&&(s===1?t=Math.min(i,s+n-1):t===i&&(s=Math.max(1,t-n+1))),Array.from({length:t-s+1},(z,y)=>s+y)};return a.jsx(N,{children:a.jsx(D,{xs:12,children:a.jsxs(M,{className:"mb-4",children:[a.jsx(v,{children:a.jsx("strong",{children:"渠道2產品列表"})}),a.jsxs(w,{children:[a.jsxs(S,{className:"table-hover fs-6",children:[a.jsx(E,{color:"light",children:a.jsx(C,{children:d.filter(e=>!m.includes(e)).map(e=>a.jsx(H,{scope:"col",className:"text-nowrap",style:h(e),children:e},e))})}),a.jsx(R,{children:x.map((e,s)=>a.jsx(C,{children:d.filter(([t])=>!m.includes(t)).map(t=>a.jsx(B,{style:h(t),children:e[t]},t))},s))})]}),a.jsxs(O,{"aria-label":"Page navigation example",children:[a.jsx(c,{"aria-label":"Previous",onClick:g,children:a.jsx("span",{"aria-hidden":"true",children:"«"})}),b().map(e=>a.jsx(c,{onClick:()=>o(e),className:e===r?"active":"",children:e},e)),a.jsx(c,{"aria-label":"Next",onClick:P,children:a.jsx("span",{"aria-hidden":"true",children:"»"})})]}),a.jsxs("span",{children:[" ","第 ",r," 頁 / ",i," 頁"," "]})]})]})})})};export{J as default};
