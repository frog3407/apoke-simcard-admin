import{r as l,j as a}from"./index-Bn-Wc87z.js";import{b as T}from"./Api-DLDctVmQ.js";import{C as N,a as D}from"./CRow-Dh0S5Kw3.js";import{C as M,a as v}from"./CCardBody-XnEY_1Pa.js";import{C as w}from"./CCardHeader-DJnYpjMK.js";import{C as S,a as E,b as C,c as H,d as R,e as B}from"./CTable-DAas0mX5.js";import{C as O,a as o}from"./CPaginationItem-BzAKUyFx.js";import"./index.esm-DAcv02ni.js";const n=10,F=()=>{const[x,u]=l.useState([]),[r,c]=l.useState(1),[p]=l.useState(5),[i,f]=l.useState(0);l.useEffect(()=>{j(r)},[r]);const j=async e=>{try{const t=await T({page:e});u(t.result.data),f(Math.ceil(t.result.total/n))}catch(s){console.error("Error fetching data:",s)}},P=()=>{r<i&&c(e=>e+1)},g=()=>{r>1&&c(e=>e-1)};l.useEffect(()=>{},[r,p]);const d=["productName","productType","activeType","settlementPrice"],h=["productCode","periodType","ruleDesc","days","apnDesc","isContract","validityPeriod","dataUnit","mcc","operatorDesc","dataTotal","minOrderCycle","lastModifiedTime","dataLimited"],m=e=>{switch(e){case"productName":return{width:"15%"};default:return{width:"8%"}}},b=()=>{const e=Math.floor(n/2);let s=Math.max(1,r-e),t=Math.min(i,r+e);return t-s+1<n&&(s===1?t=Math.min(i,s+n-1):t===i&&(s=Math.max(1,t-n+1))),Array.from({length:t-s+1},(z,y)=>s+y)};return a.jsx(N,{children:a.jsx(D,{xs:12,children:a.jsxs(M,{className:"mb-4",children:[a.jsx(w,{children:a.jsx("strong",{children:"渠道2產品列表"})}),a.jsxs(v,{children:[a.jsxs(S,{className:"table-hover fs-6",children:[a.jsx(E,{color:"light",children:a.jsx(C,{children:d.filter(e=>!h.includes(e)).map(e=>a.jsx(H,{scope:"col",className:"text-nowrap",style:m(e),children:e},e))})}),a.jsx(R,{children:x.map((e,s)=>a.jsx(C,{children:d.filter(([t])=>!h.includes(t)).map(t=>a.jsx(B,{style:m(t),children:e[t]},t))},s))})]}),a.jsxs(O,{"aria-label":"Page navigation example",children:[a.jsx(o,{"aria-label":"Previous",onClick:g,children:a.jsx("span",{"aria-hidden":"true",children:"«"})}),b().map(e=>a.jsx(o,{onClick:()=>c(e),className:e===r?"active":"",children:e},e)),a.jsx(o,{"aria-label":"Next",onClick:P,children:a.jsx("span",{"aria-hidden":"true",children:"»"})})]}),a.jsxs("span",{children:[" ","第 ",r," 頁 / ",i," 頁"," "]})]})]})})})};export{F as default};
