import{r as c,j as e}from"./index-rPMlAjG6.js";import{a as d,c as L}from"./index.esm-DRiQIw35.js";import{C as M}from"./ChannelProducts-D6WNhTr8.js";import{C as q}from"./CForm-DePwBwQ3.js";import{a as s,C as B}from"./CRow-Fcr-Zavz.js";import{C as n}from"./CFormLabel-BDegot69.js";import{C as m}from"./CFormInput-2QqpCo3w.js";import{C as j}from"./CFormControlValidation-3TKb98jG.js";import{C as S}from"./CFormCheck-BLj3Hjnq.js";import{C as H,a as Q,b as N,c as i,d as R,e as o}from"./CTable-CoNWPwpD.js";import{c as w}from"./cil-trash-CBbKHhHb.js";import{C as G,a as A,b as J,c as O,d as K}from"./CModalTitle-CMgK43QN.js";import"./Api-DLDctVmQ.js";import"./CPaginationItem-DsbglTMZ.js";import"./CFormControlWrapper-k2P-jJVk.js";import"./DefaultLayout-DokTecev.js";import"./cil-user-Ddrdy7PS.js";const de=()=>{const[C,T]=c.useState(""),[h,x]=c.useState([]),[F,I]=c.useState(!1),[f,p]=c.useState(!1),[u,V]=c.useState("joytel"),k=l=>{console.log("handleGetSelectedItems value="+JSON.stringify(l)),T(l)},y=l=>{V(l.target.value),x([]),console.log("handleSelectChannel value="+l.target.value)},D=()=>{x(C),p(!1),console.log("handelSendItems value="+C)},E=(l,t)=>{console.log("handelDelCartItem itemCode="+t);let a=h;a=a.reduce((r,v)=>(v.itemCode!==t&&r.push(v),r),[]),x(a)},P=(l,t)=>{t<1||x(a=>a.map(r=>r.itemCode===l?{...r,itemQuantity:t}:r))},g=l=>l.itemPrice*l.itemQuantity,b=()=>h.reduce((l,t)=>l+g(t),0),z=l=>{l.currentTarget.checkValidity()===!1&&(l.preventDefault(),l.stopPropagation()),I(!0)};return e.jsxs(q,{className:"row g-3 needs-validation",noValidate:!0,validated:F,onSubmit:z,children:[e.jsxs(s,{md:4,className:"position-relative",children:[e.jsx(n,{htmlFor:"username",children:"客戶姓名"}),e.jsx(m,{type:"text",id:"username",defaultValue:"",required:!0}),e.jsx(j,{invalid:!0,children:"請輸入客戶姓名"})]}),e.jsxs(s,{md:4,className:"position-relative",children:[e.jsx(n,{htmlFor:"email",children:"Email"}),e.jsx(m,{type:"text",id:"email",defaultValue:"",required:!0}),e.jsx(j,{invalid:!0,children:"請輸入Email"})]}),e.jsxs(s,{md:4,className:"position-relative",children:[e.jsx(n,{htmlFor:"cellphone",children:"聯絡電話"}),e.jsx(m,{type:"text",id:"cellphone",defaultValue:"",required:!0}),e.jsx(j,{invalid:!0,children:"請輸入聯絡電話"})]}),e.jsxs(s,{md:12,className:"position-relative",children:[e.jsx(n,{htmlFor:"note",children:"備註"}),e.jsx(m,{type:"text",id:"note",defaultValue:""}),e.jsx(j,{invalid:!0,children:"請輸入備註"})]}),e.jsxs(s,{md:12,className:"position-relative",children:[e.jsx(n,{htmlFor:"channelType",children:"渠道類型    "}),e.jsx(S,{inline:!0,type:"radio",value:"joytel",name:"channelType",id:"fchannelType1",label:"渠道1",checked:u==="joytel",onChange:y}),e.jsx(S,{inline:!0,type:"radio",value:"tgt",name:"channelType",id:"fchannelType2",label:"渠道2",checked:u==="tgt",onChange:y})]}),e.jsx(s,{md:12,children:e.jsxs(n,{htmlFor:"validationDefault05",children:["商品列表    ",e.jsx(d,{color:"info",size:"sm",onClick:()=>p(!f),children:"新增商品"})]})}),e.jsx(s,{md:12,children:e.jsxs(H,{children:[e.jsx(Q,{color:"secondary",children:e.jsxs(N,{children:[e.jsx(i,{scope:"col",className:"text-nowrap",children:"商品名稱"}),e.jsx(i,{scope:"col",className:"text-nowrap",children:"單價"}),e.jsx(i,{scope:"col",className:"text-nowrap",children:"激活日期"}),e.jsx(i,{scope:"col",className:"text-nowrap",children:"數量"}),e.jsx(i,{scope:"col",className:"text-nowrap",children:"總價"}),e.jsx(i,{scope:"col",className:"text-nowrap",children:"操作"})]})}),e.jsx(R,{children:h.map((l,t)=>e.jsxs(N,{id:l.itemCode,children:[e.jsx(o,{children:l.itemName}),e.jsx(o,{children:l.itemPrice}),e.jsx(o,{children:l.itemDate}),e.jsx(o,{children:e.jsx(m,{type:"number",size:"sm",max:10,min:1,value:l.itemQuantity,onChange:a=>P(l.itemCode,parseInt(a.target.value,10))})}),e.jsx(o,{children:g(l).toFixed(2)}),e.jsx(o,{children:e.jsx(d,{color:"danger",size:"sm",onClick:a=>E(a,l.itemCode),children:e.jsx(L,{icon:w,size:"sm"})})})]},t))})]})}),e.jsxs(B,{className:"my-2 text-end",children:[e.jsxs(s,{children:["商品總價：",b().toFixed(2),"元"]}),e.jsxs(s,{children:["應結算金額：",b().toFixed(2),"元"]})]}),e.jsx(s,{xs:12,className:"mb-5",children:e.jsx(d,{color:"primary",type:"submit",className:"float-end",children:"送出"})}),e.jsxs(G,{size:"xl",alignment:"center",visible:f,onClose:()=>p(!1),"aria-labelledby":"ScrollingLongContentExampleLabel",children:[e.jsx(A,{children:e.jsx(J,{id:"ScrollingLongContentExampleLabel",children:"商品列表"})}),e.jsx(O,{children:e.jsx(M,{channelName:u,isSelect:!0,onSelectedItem:k,cartItems:h})}),e.jsxs(K,{children:[e.jsx(d,{color:"secondary",onClick:()=>p(!1),children:"取消"}),e.jsx(d,{color:"primary",onClick:D,children:"確認"})]})]})]})};export{de as default};
